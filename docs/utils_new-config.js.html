<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/new-config.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/new-config.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import inquirer from "inquirer";
import fs from "fs";
import chalk from "chalk";
/**
 * @fileOverview Manages the generation of a new configuration file.
 * @author Gerard Hernandez
 * @module cfgi/cli
 *
 * @requires     {@link https://www.npmjs.com/package/inquirer | inquirer}
 * @requires     {@link https://www.npmjs.com/package/chalk | chalk}
 * @requires     {@link https://www.npmjs.com/package/fs | fs}
 */
const configRunsTemplate = `runs(\"a passing command\", () => {
      command(\"exit 0\");
    }),

    runs(\"a failing command\", () => {
      command(\"exit 1\");
    }),`;
const configOptionsTemplate = `
const options = { silent: false, exclude: "none" };
`;
const configTemplate = (name, includeSample, includeOptions) => `import {
  task,
  command,
  runs,
  commandLive,
} from "cfgi";
${includeOptions ? configOptionsTemplate : ""}
task(
  "${name}",
  () => {},
  [
    ${includeSample ? configRunsTemplate : "// Commands go here..."}
  ],
  options
);
`;
/**
 * Generates a new configuration file asynchronously.
 * @function
 * @async
 * @param {string} [configName] - The name for the new configuration. If not provided, the user will be prompted for input.
 * @returns {Promise&lt;string>} The name of the generated configuration file.
 */
export async function generateNewConfig(configName, includeSample = false, includeOptions = false) {
    /**
     * If configName is not provided, prompt the user for input.
     * @type {string}
     */
    const configNamePrompted = configName ||
        (await inquirer
            .prompt({
            type: "input",
            name: "configName",
            message: "What is the name of the config?",
        })
            .then((answers) => {
            console.log("");
            return answers["configName"];
        }));
    if (includeSample)
        console.log(`${chalk.green("✔")} Generated sample tests for ${chalk.blue(configNamePrompted)}.`);
    if (includeOptions)
        console.log(`${chalk.green("✔")} Generated options object for ${chalk.blue(configNamePrompted)}.\n`);
    const configFileName = configNamePrompted.replace(/ /g, "-").toLowerCase() + ".cfgi.mjs";
    // Current working directory
    const cwd = process.cwd();
    // Create the config file
    fs.writeFileSync(`${cwd}/${configFileName}`, configTemplate(configNamePrompted, includeSample, includeOptions));
    console.log(chalk.yellow(`ℹ Generator created config file ${chalk.blue(configFileName)} in ${chalk.blue(cwd)}.\n`));
    return configFileName;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="cfgi.module_js.html">cfgi.js</a></li><li><a href="module-cfgi_cli.html">cfgi/cli</a></li><li><a href="module-cfgi_runner.html">cfgi/runner</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Aug 31 2023 03:13:58 GMT+0200 (GMT+02:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
