<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: new-config.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: new-config.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import inquirer from "inquirer";
import fs from "fs";
import chalk from "chalk";
const configRunsTemplate = `runs(\"a passing command\", () => {
      command(\"exit 0\");
    }),

    runs(\"a failing command\", () => {
      command(\"exit 1\");
    }),`;
const configOptionsTemplate = `
const options = { silent: false, exclude: "none" };
`;
const configTemplate = (name, includeSample, includeOptions) => `import {
  task,
  command,
  runs,
  commandLive,
} from "cfgi";
${includeOptions ? configOptionsTemplate : ""}
task(
  "${name}",
  () => {},
  [
    ${includeSample ? configRunsTemplate : "// Commands go here..."}
  ],
  options
);
`;
/**
 * Generates a new configuration file asynchronously.
 * @function generateNewConfig
 * @async
 * @param {string} [configName] - The name for the new configuration. If not provided, the user will be prompted for input.
 * @returns {Promise&lt;string>} The name of the generated configuration file.
 */
export async function generateNewConfig(configName, includeSample = false, includeOptions = false) {
    /**
     * If configName is not provided, prompt the user for input.
     * @type {string}
     */
    const configNamePrompted = configName ||
        (await inquirer
            .prompt({
            type: "input",
            name: "configName",
            message: "What is the name of the config?",
        })
            .then((answers) => {
            console.log("");
            return answers["configName"];
        }));
    if (includeSample)
        console.log(`${chalk.green("✔")} Generated sample tests for ${chalk.blue(configNamePrompted)}.`);
    if (includeOptions)
        console.log(`${chalk.green("✔")} Generated options object for ${chalk.blue(configNamePrompted)}.\n`);
    const configFileName = configNamePrompted.replace(/ /g, "-").toLowerCase() + ".cfgi.mjs";
    // Current working directory
    const cwd = process.cwd();
    // Create the config file
    fs.writeFileSync(`${cwd}/${configFileName}`, configTemplate(configNamePrompted, includeSample, includeOptions));
    console.log(chalk.yellow(`ℹ Generator created config file ${chalk.blue(configFileName)} in ${chalk.blue(cwd)}.\n`));
    return configFileName;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#command">command</a></li><li><a href="global.html#commandLive">commandLive</a></li><li><a href="global.html#currentDirectory">currentDirectory</a></li><li><a href="global.html#findConfigFilesInDir">findConfigFilesInDir</a></li><li><a href="global.html#generateIndividualTaskFile">generateIndividualTaskFile</a></li><li><a href="global.html#generateMultiTaskFile">generateMultiTaskFile</a></li><li><a href="global.html#generateNewConfig">generateNewConfig</a></li><li><a href="global.html#parseConfig">parseConfig</a></li><li><a href="global.html#runInVM">runInVM</a></li><li><a href="global.html#runs">runs</a></li><li><a href="global.html#selectConfigNameFromDir">selectConfigNameFromDir</a></li><li><a href="global.html#selectTaskFromConfig">selectTaskFromConfig</a></li><li><a href="global.html#task">task</a></li><li><a href="global.html#validateProvidedConfigName">validateProvidedConfigName</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sat Aug 19 2023 03:39:03 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
